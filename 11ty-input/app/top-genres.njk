---
title: Your top genres
---

{% edge 'njk' %}
<a class="button button-generous" href="/app/1-explore/">&larr; Done</a>
{# <pre> {{ eleventy|dump(2) }}</pre>
<pre>{{ topGenres|dump(2) }}</pre> #}
<div id="genres-pre-js">
    <div class="button-group">
        {% set currentTimeRange = eleventy.edge.query.timeRange or "medium_term" %}
        {% set timeRanges = [{value: 'short_term', label: 'Last 4 weeks'}, {value: 'medium_term', label: 'Last 6 months'}, {value: 'long_term', label: 'All time'}] %}
        {% for timeRange in timeRanges %}
            <form>
                <button {% if currentTimeRange == timeRange.value %} aria-pressed="true" {% endif %} name="timeRange" value="{{ timeRange.value }}">{{ timeRange.label }}</button>
            </form>
        {% endfor %}
    </div>
    <ul class="genres">
        {% set genresToShow = topGenres | arrSlice(0, 10) %}
        {% set chosenGenres = eleventy.edge.cookies.chosenGenres | commaStrToArray %}
        {% for genre in genresToShow %}
            <li>
                <a href="/app/genre/?genre={{ genre.name }}">
                    <span class="genre-name">{{ genre.name }}</span>
                    <span class="artist-count" title="{{ genre.count }} of your top artists">{{ genre.count }}×</span>
                    <form action="/toggle-genre">
                        <button class="toggle-button" name="genre" value="{{ genre.name }}">
                            {% if genre.name in chosenGenres %}
                                × remove
                            {% else %}
                                + add
                            {% endif %}
                        </button>
                        <input type="hidden" name="return_to" value="{{ requestUrl }}"/>
                        <input type="hidden" name="action" value="{% if genre.name in chosenGenres %}remove{% else %}add{% endif %}"/>
                    </form>
                </a>
            </li>
        {% endfor %}
    </ul>
</div>
<a class="button button-generous" href="/app/1-explore/">&larr; Done</a>
{% endedge %}